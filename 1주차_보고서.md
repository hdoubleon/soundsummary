# 🎧 강의 녹음 요약 AI - 1주차 개발 보고서

**프로젝트명**: SoundSummary  
**개발 기간**: 2025년 11월 초 ~ 11월 17일  
**개발자**: [이름]  
**Repository**: hdoubleon/soundsummary  
**Branch**: dev

---

## 📋 목차
1. [프로젝트 개요](#1-프로젝트-개요)
2. [주요 기능](#2-주요-기능)
3. [기술 스택](#3-기술-스택)
4. [구현 상세](#4-구현-상세)
5. [UI/UX 디자인](#5-uiux-디자인)
6. [파일 구조](#6-파일-구조)

---

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
강의나 회의 녹음 파일을 자동으로 텍스트로 변환하고 AI를 활용하여 요약본을 생성하는 웹 애플리케이션 개발

### 1.2 주요 목표
- 실시간 음성 녹음 및 파일 업로드 지원
- AI 기반 자동 요약 생성
- 화자 구분 기능
- 로컬 파일 시스템 연동으로 체계적인 관리
- VSCode 스타일의 직관적인 UI/UX

---

## 2. 주요 기능

### 2.1 음성 입력
#### 실시간 녹음
- **MediaRecorder API** 활용
- 브라우저 마이크 권한 요청 및 관리
- 녹음 시작/중지/이어서 녹음/처음부터 녹음
- 실시간 타이머 표시 (MM:SS 형식)
- 녹음 상태 시각적 표시 (pulse 애니메이션)

#### 파일 업로드
- 다중 파일 업로드 지원
- 지원 형식: `.mp3`, `.wav`, `.webm` 등
- 파일 크기 제한: 100MB
- 드래그 앤 드롭 지원
- 파일 미리보기 (이름, 크기, 길이)
- 개별 파일 제거 기능

### 2.2 요약 생성
- 백엔드 API 연동을 통한 음성 인식
- AI 기반 요약본 자동 생성
- 화자 구분 (Speaker Diarization)
  - 각 화자별 타임스탬프
  - 발화 내용 구분
- Markdown 형식 요약본
- HTML로 자동 변환하여 표시

### 2.3 파일 관리 시스템

#### File System Access API 활용
```
summary/
├── workspace1/
│   ├── subject1/
│   │   ├── audio_file.webm
│   │   ├── workspace1-subject1.html
│   │   └── data.json
│   └── subject2/
└── workspace2/
```

#### 주요 기능
- 로컬 폴더 선택 및 접근
- Workspace/Subject 구조 관리
- 파일명 자동 정제 (특수문자 제거)
- 폴더 생성, 이름 변경, 삭제
- 우클릭 컨텍스트 메뉴

### 2.4 사이드바 시스템

#### 요약 기록 패널
- 최신 요약 목록 표시
- 날짜, 제목, 타입 표시
- 클릭하여 탭으로 열기
- 새로고침 및 전체 삭제

#### 로컬 디렉토리 패널
- 폴더 트리 구조 표시
- 펼치기/접기 기능
- HTML 파일 클릭 시 요약 뷰어 열기
- data.json 자동 로드

### 2.5 탭 시스템

#### 다중 탭 관리
- 환영 탭 (시작하기)
- 요약 뷰어 탭
- HTML 뷰어 탭
- 탭 전환 및 닫기
- 중복 열림 방지

#### 요약 뷰어
- 요약본, 화자 구분, 오디오 파일 3가지 뷰
- 버튼으로 뷰 전환
- 마크다운 렌더링 (marked.js)
- 오디오 플레이어 내장
- 복사 및 내보내기 기능

---

## 3. 기술 스택

### 3.1 Frontend
- **HTML5**: 시맨틱 마크업
- **CSS3**: 
  - Flexbox, Grid 레이아웃
  - 애니메이션 및 트랜지션
  - VSCode 스타일 디자인
- **JavaScript (ES6+)**:
  - 모듈 패턴
  - async/await
  - Promise
  - 이벤트 리스너

### 3.2 주요 API
- **MediaRecorder API**: 음성 녹음
- **File System Access API**: 로컬 파일 관리
- **Fetch API**: 백엔드 통신
- **localStorage**: 세션 저장
- **marked.js**: 마크다운 파싱

### 3.3 외부 라이브러리
- **Font Awesome 6.0**: 아이콘
- **marked.min.js**: 마크다운 → HTML 변환

---

## 4. 구현 상세

### 4.1 핵심 JavaScript 함수

#### 녹음 관리
```javascript
// 녹음 토글
async function toggleRecording()

// 이어서 녹음
async function continueRecording()

// 처음부터 녹음
async function restartRecording()

// 타이머 업데이트
function updateTimer()
```

#### 파일 처리
```javascript
// 파일 업로드 처리
function handleFileUpload(event)

// 요약 생성
async function summarizeAudio(event)

// 백엔드 API 호출
async function sendTranscriptionRequest(options)
```

#### 폴더 관리
```javascript
// 로컬 폴더 열기
async function openLocalFolder()

// 폴더 구조 렌더링
async function renderLocalDirectory()

// Workspace 생성
async function createNewWorkspace(event)

// 폴더 이름 정제
function sanitizeFolderName(name)
```

#### 탭 시스템
```javascript
// 요약 탭 생성
function createSummaryTab(summary)

// HTML 뷰어 탭 생성
function createHtmlViewerTab(tabId, title, htmlContent, fileHandle)

// 탭 전환
function switchToTab(tabId)

// 탭 닫기
function closeTab(tabId)
```

### 4.2 HTML 자동 생성

```javascript
async function generateAndSaveResultHTML(summary, subjectHandle)
```

**생성 내용**:
- 완전한 HTML 문서 (CSS 포함)
- 요약본, 화자 구분, 오디오 플레이어
- 3개 탭으로 구성
- VSCode 다크 테마 스타일
- 자바스크립트 탭 전환 기능

### 4.3 데이터 구조

#### Summary 객체
```javascript
{
    id: number,
    title: string,
    workspace: string,
    subject: string,
    fileName: string,
    content: string,              // 요약본 (Markdown)
    speakerSegments: [            // 화자 구분
        {
            speaker: string,
            start: number,
            end: number,
            text: string
        }
    ],
    timestamp: string,
    type: 'file' | 'recording' | 'saved',
    audioUrl: string,
    fileSize: number,
    jobStatus: string
}
```

#### data.json
```json
{
    "title": "강의명",
    "workspace": "자료구조",
    "subject": "1주차",
    "fileName": "lecture.webm",
    "timestamp": "2025. 11. 17. 오후 3:00:00",
    "summary": "# 요약본...",
    "speakerSegments": [...],
    "fileSize": 1048576,
    "mimeType": "audio/webm",
    "jobStatus": "COMPLETED"
}
```

---

## 5. UI/UX 디자인

### 5.1 디자인 컨셉
- **VSCode 스타일**: 개발자 친화적 인터페이스
- **다크 테마**: 눈의 피로 감소
- **직관적 레이아웃**: 사이드바 + 메인 콘텐츠

### 5.2 색상 팔레트

#### 배경색
- Primary: `#1e1e1e` (메인 배경)
- Secondary: `#252526` (사이드바)
- Tertiary: `#2d2d30` (카드, 패널)
- Hover: `#3c3c3c` (호버 상태)

#### 텍스트
- Primary: `#cccccc` (본문)
- Secondary: `#8c8c8c` (보조)
- White: `#ffffff` (제목, 강조)

#### 액센트 컬러
- Blue: `#007acc` (액센트, 링크)
- Green: `#10a37f` (성공, 확인)
- Red: `#ef4444` (경고, 녹음 중)
- Yellow: `#dcb67a` (아이콘, 하이라이트)

### 5.3 컴포넌트 디자인

#### 버튼
- 라운드 코너 (border-radius: 4-8px)
- 호버 효과 (transform, background 변화)
- 아이콘 + 텍스트 조합
- 상태별 색상 변화

#### 카드
- 그림자 효과
- 부드러운 전환 애니메이션
- 호버 시 살짝 위로 이동

#### 모달
- 배경 오버레이 (rgba(0,0,0,0.7))
- 중앙 정렬
- 슬라이드 인 애니메이션

### 5.4 애니메이션

#### Keyframes
```css
@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.3; }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
```

---

## 6. 파일 구조

```
soundsummary/
├── index.html              # 메인 HTML
├── script.js               # 메인 JavaScript (3,610줄)
├── styles.css              # 메인 CSS (2,193줄)
├── README.md               # 프로젝트 설명
├── css/                    # CSS 모듈 (미사용)
│   ├── base.css
│   ├── modal.css
│   ├── sidebar.css
│   ├── tabs.css
│   └── viewer.css
└── js/                     # JS 모듈 (미사용)
    ├── state.js
    └── ui.js
```

### 6.1 코드 통계
- **HTML**: ~400줄
- **JavaScript**: ~3,610줄
- **CSS**: ~2,193줄
- **총 코드 라인**: ~6,200줄

---

## 7. 주요 이슈 및 해결

### 7.1 파일 시스템 접근 권한
**문제**: 브라우저 보안 정책으로 파일 접근 제한  
**해결**: File System Access API 사용 (Chrome, Edge 지원)

### 7.2 녹음 데이터 누적
**문제**: 이어서 녹음 시 기존 데이터 유지 필요  
**해결**: `recordedChunks` 배열과 `totalRecordingTime` 변수로 관리

### 7.3 중복 파일명 처리
**문제**: 동일한 파일명 업로드 시 덮어쓰기  
**해결**: `ensureUniqueFileName()` 함수로 (2), (3) 접미사 추가

### 7.4 HTML 파일 자동 생성
**문제**: 생성된 HTML이 오디오 파일을 찾지 못함  
**해결**: 상대 경로 사용 (`./audio_file.webm`)

---

## 8. 테스트 환경

### 8.1 브라우저 호환성
- ✅ Chrome 120+ (권장)
- ✅ Edge 120+
- ⚠️ Firefox (File System Access API 미지원)
- ⚠️ Safari (File System Access API 미지원)

### 8.2 테스트 시나리오
1. 실시간 녹음 → 요약 생성 → 파일 저장
2. 파일 업로드 → 요약 생성 → 탭 열기
3. 로컬 폴더 연동 → 파일 탐색 → HTML 열기
4. 다중 파일 업로드 → 일괄 처리
5. 폴더 구조 관리 (생성, 이름 변경, 삭제)

---

## 9. 향후 개발 계획 (1주차 완료 시점)

### 9.1 UI/UX 개선
- [ ] 다크/라이트 테마 전환
- [ ] 애니메이션 효과 강화
- [ ] 모바일 반응형 디자인

### 9.2 기능 추가
- [ ] 검색 기능
- [ ] 태그 시스템
- [ ] 북마크/즐겨찾기
- [ ] PDF 내보내기

### 9.3 성능 최적화
- [ ] 코드 분할 (모듈화)
- [ ] 번들링 (webpack)
- [ ] 로딩 속도 개선

---

## 10. 결론

### 10.1 성과
- ✅ 기본 음성 녹음 및 파일 업로드 구현
- ✅ AI 요약 기능 백엔드 연동
- ✅ 로컬 파일 시스템 완전 구현
- ✅ VSCode 스타일 UI 구축
- ✅ 탭 시스템 및 사이드바 완성

### 10.2 배운 점
- File System Access API 활용법
- MediaRecorder API로 음성 녹음
- 복잡한 상태 관리
- 비동기 처리 (async/await)
- 모듈 패턴 설계

### 10.3 개선 필요 사항
- 코드 모듈화 (현재 단일 파일)
- 에러 핸들링 강화
- 브라우저 호환성 개선
- 테마 시스템 추가
- 모바일 최적화

---

**작성일**: 2025년 11월 17일  
**버전**: 2.0.1  
**다음 주차 목표**: UI/UX 개선 및 테마 시스템 구축
